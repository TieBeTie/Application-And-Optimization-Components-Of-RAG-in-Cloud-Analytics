# Всероссийская олимпиада школьников по информатике 2025–2026, профиль «Программирование»
Региональный этап, первый тур, 17 января 2026 года

# Задача 4. Прыжки по вершинам

## Ограничение по времени: 1 секунда
## Ограничение по памяти: 512 мегабайт

В компьютерной игре «Сверчок» герой прыгает между вершинами горной цепи с целью попасть на точку финиша, где заканчивается уровень.

Горная цепь для прохождения состоит из подряд идущих зубцов, $i$-й из которых находится на горизонтали $x = i$ и имеет высоту $h_i$. При этом для любого $i < j$ герой может прыгнуть по прямой с зубца $i$ на зубец $j$, если известно, что во время полёта он не упадёт на других зубцах. Более формально, не найдётся такого $k$, что $i < k < j$ и вершина $k$-го зубца $(k, h_k)$ находится строго ниже отрезка, соединяющего точки $(i, h_i)$ и $(j, h_j)$.

Команда «Победи ИИ» занимается тестированием управления героем в этой игре. Для сгенерированных данных необходимо ответить на несколько запросов: для пары вершин $(l, r)$ $(1 ≤ l < r ≤ n)$ вычислить, какое минимальное число прыжков, взяв за зубец $i = l$, герой сможет попасть на зубец $r$.

## Формат входных данных

В первой строке входных данных находится число $n$ $(1 ≤ n ≤ 10⁵)$ — число зубцов.
Во второй строке находятся $n$ чисел $h_1, h_2, …, h_n$ $(0 ≤ h_i ≤ 10¹³)$ — высоты зубцов.
В третьей строке находится число $q$ $(1 ≤ q ≤ 10⁵)$ — количество запросов.
В следующих $q$ строках находятся числа $l_i, r_i$ $(1 ≤ l_i < r_i ≤ n)$ — параметры $i$-го запроса.

## Формат выходных данных

Для каждого запроса в отдельной строке выведите целое неотрицательное число — минимальное необходимое число прыжков.

# $O(nlogn)$ на препроцессинг, давай попробуем разделяй и властвуй.
нашли ответ A длины p на одном и втором отрезке B длины q
как объединить?
Без ограничения общности, пусть последний зубец A шёл вверх, попробуем продлить на B
rotate(a, b, c) = (b - a) * (c - b) > 0 - поворот налево

рассмотрим $A_p-1, A_p, B_1$
предыдущий поворот A_p-2, A_p-1, A_p поворот 
rotate(A_p-1, A_p, B_1) < 0 - поворот направо, значит можно просто продлить ответ A на B

хмм, а может это просто задача на выпуклую оболочку?
